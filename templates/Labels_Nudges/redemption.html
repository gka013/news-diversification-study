{# templates/Labels_Nudges/redemption.html #}
{% extends "Labels_Nudges/main.html" %}
{% block content %}
<div class="container" style="max-width:750px; margin:40px auto;">

  <!-- Step Indicator -->
  <div class="step-indicator d-flex justify-content-between mb-4">
    {% for title in steps %}
      <div class="step text-center flex-fill position-relative {% if forloop.counter < current_phase %}completed{% elif forloop.counter == current_phase %}active{% endif %}">
        <div class="step-number mx-auto mb-1">{{ forloop.counter }}</div>
        <div class="step-title">{{ title }}</div>
        {% if not forloop.last %}
          <div class="position-absolute" style="top:16px; left:50%; width:100%; height:2px;
                      background:#e2e2e2; z-index:-1;"></div>
        {% endif %}
      </div>
    {% endfor %}
  </div>

  <!-- Redemption Card -->
  <div class="card shadow-sm mb-4">
    <div class="card-header bg-white border-0">
      <h3 class="card-title mb-0">Phase {{ current_phase }} Complete!</h3>
      <p class="text-muted mb-0">Thank you for finishing Phase {{ current_phase }}.</p>
    </div>
    <div class="card-body">

      <p>Your unique code (for our records) is:</p>
      <div class="code-display mb-4">{{ redemption_code }}</div>

      <a href="{{ complete_url }}" class="btn btn-primary btn-lg w-100 mb-3">
        Claim Phase {{ current_phase }} Reward
      </a>

      {% if next_phase_num %}
        <p class="mt-3 mb-1 text-center">
          Or go back to home below:
        </p>
        <div class="text-center">
          <a href="homes.html" class="btn btn-outline-secondary">
            Go to homepage
          </a>
        </div>
      {% else %}
        <p class="mt-3 text-center">
          You’ve now completed all phases—thank you for participating!
        </p>
      {% endif %}

    </div>
  </div>

  <footer class="text-center text-muted small mb-4">
    &copy; DARS RESEARCH GROUP
  </footer>
</div>
{% endblock %}
